===========
TDT backend
===========

Hardware
========

All equipment is produced by Tucker-Davis Technologies

RZ5_
    Used primarily for data acquisition, 4 ADC, 4 DAC and 16 TTL (input or
    output)
RX6_
    Used primarily for stimulus output (audio), 2 ADC, 2 DAC and 16 TTL (input
    or output)
PA5_
    Programmable attenuator (control sound level)
RPvds_
    Schema design tool for FPGA module in TDT devices

The RZ6 and RX6 are essentially FPGA units.  RPvds allows us to create circuit
schemas that are compiled and uploaded to the FGPA chip inside the RZ5 and RX6.
The RZ5/RX6 environments provide a limited amount of RAM memory (to buffer data
for analysis and transfer to the computer) The RX6 is primarily responsible for
playing the audio signal and generating the necessary TTLs for controlling the
timing of other hardware devices.

Audio sounds are generated by uploading segments of a waveform (generated by the
computer) to a buffer (accessed via the FPGA).  These segments are played out in
succession to one of DACs.  This DAC is connected to an attenuator/amplifier
series that drives the speaker.  Since we utilize auditory stimuli up to 50 kHz,
we need to run the RX6 unit at ~100 kHz (the Nyquist frequency).  Thus, the
waveform must be generated with an identical sampling frequency (~100 kHz).
This is a raw waveform (e.g. a point-by-point value representing the actual
voltage on the DAC on each "tick" of the FPGA clock).  Each point is a 32-bit
float, meaning that the RX6 consumes ~0.4 MB/s when playing out to a single
speaker.  The interface between the RX6 and the computer can support write
speeds of 1.0 MB/s.  However, if I am currently running an experiment with a 5
second waveform, a single waveform is 2 MB in size.  Each time I change a
parameter in the GUI, this means that we must update the FPGA buffer with the
new waveform.  At the FPGA's maximum transfer rate, this means it takes 2
seconds to upload the entire waveform.

.. _RZ5: http://www.tdt.com/products/RZ5.htm
.. _RX6: http://www.tdt.com/products/RX6.htm
.. _PA5: http://www.tdt.com/products/PA5.htm
.. _RPvds: http://www.tdt.com/software/rpvds.htm

The API
=======

.. automodule:: cns.equipment.TDT.rpcox
    :members:
